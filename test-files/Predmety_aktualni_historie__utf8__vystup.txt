
PØEFORMÁTOVANÝ DOTAZ (bez komentáøù):
-------------------------------------
WITH pr_o AS
  (SELECT pr.zkratka AS pr ,
          'Akt. zaznam' AS oracle_user,
          SYSDATE AS log_ts,
          '-' AS dml ,
          ap.*
   FROM
     (SELECT *
      FROM st01.predmet
      WHERE predmet.status = 9 ) pr
   INNER JOIN st01.aktualni_predmet ap ON (ap.predmet_id = pr.predmet_id
                                           AND ap.aktualni_predmet_id in (262216) )) ,
     pr_all AS
  (SELECT o1.*
   FROM pr_o o1
   UNION ALL SELECT o2.pr,
                    o3.*
   FROM pr_o o2
   INNER JOIN logger.aktualni_predmet o3 ON o3.aktualni_predmet_id = o2.aktualni_predmet_id)
SELECT tmp.upd_ts AS zmeneno,
       tmp.upd_uid AS zmenil_id ,
       pe.jmenovka AS zmenil ,
       tmp.*
FROM pr_all tmp
INNER JOIN
  (SELECT pe50.per_id ,
          pe50.label_pr AS jmenovka
   FROM brutisadm.person pe50
   WHERE pe50.status = 9 ) pe ON pe.per_id = tmp.upd_uid
ORDER BY tmp.pr,
         tmp.aktualni_predmet_id,
         tmp.upd_ts DESC,
         tmp.log_ts DESC
-------------------------------------

TABULKA pr_o (ID 0)
    Aliasy:
        o1
        o2
    Attributy:
        '-' (alias: dml)
        'Akt. zaznam' (alias: oracle_user)
        SYSDATE (alias: log_ts)
        ap.*
        pr.zkratka (alias: pr)
    Vazba na tabulky:
        select-0 (ID 1)
        join-0 (ID 4)
    Komentáø:
        "-- as pr_o     --------------------------- O [...]"
    SQL kód:
        "pr_o as (select             pr.zkratka as pr [...]"

TABULKA select-0 (ID 1)
    Aliasy:
        pr
    Attributy:
        *
        predmet.status = 9
    Vazba na tabulky:
        st01.predmet (ID 2)
    Komentáø:
        ""
    SQL kód:
        "select * from st01.predmet                   [...]"

TABULKA st01.predmet (ID 2)
    Aliasy:
        -- *** Predmet
                       
    Attributy:
        <žádné>
    Vazba na tabulky:
        <žádné>
    Komentáø:
        ""
    SQL kód:
        ""

TABULKA st01.aktualni_predmet (ID 3)
    Aliasy:
        ap
    Attributy:
        <žádné>
    Vazba na tabulky:
        <žádné>
    Komentáø:
        ""
    SQL kód:
        ""

TABULKA join-0 (ID 4)
    Aliasy:
        <žádné>
    Attributy:
        ap.aktualni_predmet_id IN (262216)
        ap.predmet_id = pr.predmet_id
    Vazba na tabulky:
        st01.aktualni_predmet (ID 3)
    Komentáø:
        ""
    SQL kód:
        "inner join st01.aktualni_predmet ap          [...]"

TABULKA pr_all (ID 5)
    Aliasy:
        tmp
    Attributy:
        o1.*
        o2.pr
        o3.*
    Vazba na tabulky:
        pr_o (ID 0)
        join-1 (ID 7)
    Komentáø:
        "-- as pr_all     --------------------------- [...]"
    SQL kód:
        "pr_all as (         select o1.*         from [...]"

TABULKA logger.aktualni_predmet (ID 6)
    Aliasy:
        o3
    Attributy:
        <žádné>
    Vazba na tabulky:
        <žádné>
    Komentáø:
        ""
    SQL kód:
        ""

TABULKA join-1 (ID 7)
    Aliasy:
        <žádné>
    Attributy:
        o3.aktualni_predmet_id = o2.aktualni_predmet_id
    Vazba na tabulky:
        logger.aktualni_predmet (ID 6)
    Komentáø:
        ""
    SQL kód:
        "inner join logger.aktualni_predmet o3        [...]"

TABULKA select-1 (ID 8)
    Aliasy:
        <žádné>
    Attributy:
        pe.jmenovka (alias: zmenil)
        tmp.*
        tmp.upd_ts (alias: zmeneno)
        tmp.upd_uid (alias: zmenil_id)
    Vazba na tabulky:
        pr_all (ID 5)
        join-2 (ID 11)
    Komentáø:
        ""
    SQL kód:
        ""

TABULKA select-2 (ID 9)
    Aliasy:
        pe
    Attributy:
        pe50.label_pr (alias: jmenovka)
        pe50.per_id--, pe50.per_family_names as prijmeni, pe50.per_first_names as jmeno 
                 
        pe50.status = 9
    Vazba na tabulky:
        brutisadm.person (ID 10)
    Komentáø:
        ""
    SQL kód:
        "select pe50.per_id--, pe50.per_family_names  [...]"

TABULKA brutisadm.person (ID 10)
    Aliasy:
        pe50
    Attributy:
        <žádné>
    Vazba na tabulky:
        <žádné>
    Komentáø:
        ""
    SQL kód:
        ""

TABULKA join-2 (ID 11)
    Aliasy:
        <žádné>
    Attributy:
        pe.per_id = tmp.upd_uid
    Vazba na tabulky:
        select-2 (ID 9)
    Komentáø:
        ""
    SQL kód:
        "inner join (select pe50.per_id--, pe50.per_f [...]"

